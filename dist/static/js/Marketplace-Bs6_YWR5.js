import{_ as e}from"./NftTitle.vue_vue_type_script_setup_true_lang-fAvmczgN.js";import{M as a,S as t}from"./@arco-design-BJ-ThMXq.js";import{M as s}from"./Marketplace-8QyBFxvP.js";import{a as i}from"./axios-FT5ipKkF.js";import{e as r,r as l,o,m as n,l as p,h as m,n as c,F as u,P as d,j as f}from"./@vue-DVdXjGaL.js";import{B as j,C as w,f as v}from"./ethers-Bs4S-GtA.js";import{_ as g}from"./index-B0Sb-4z8.js";import"./resize-observer-polyfill-zrGQmaJP.js";import"./vite-plugin-node-polyfills-Dh68s0dh.js";import"./compute-scroll-into-view-DCNUDwgY.js";import"./b-tween-Bhjdt4nK.js";import"./dayjs-Cc8YkNtQ.js";import"./number-precision-BB5CzNB6.js";import"./scroll-into-view-if-needed-CcisqVa9.js";import"./b-validate-BXhoJxPC.js";import"./@adraffy-Crx4Gj2H.js";import"./vue-router-3lz8Ac5B.js";import"./pinia-c4Tz4aig.js";import"./pinia-plugin-persistedstate-bJzzEmMD.js";const y={class:"h-1/2 w-full text-white text-lg flex flex-col justify-center items-center pt-20"},x={class:"w-full flex justify-center flex-wrap warpple-class"},_=g(r({name:"Marketplace",__name:"Marketplace",setup(r){const g=l([]),_=l([]),k=l(!1),{success:b,warning:h,error:M}=a,N=l(!1);return o(async()=>{k.value||await(async()=>{if(!window.ethereum)return _.value=[],void h("Please install MetaMask!");try{N.value=!0;const e=new j(window.ethereum),a=await e.getSigner(),t=new w(s.address,s.abi,await a),r=await t.getAllNFTs(),l=await Promise.all(r.map(async e=>{const a=await t.tokenURI(e[0]),s=await i.get(a);return{price:v(e[3],"ether"),tokenId:Number(e[0]),seller:e[2],owner:e[1],image:s.data.image,name:s.data.name,description:s.data.description}}));g.value=l,b("成功加载 ".concat(l.length," 个 NFT 数据")),N.value=!1}catch(e){M("加载 NFT 数据失败："+e.message),N.value=!1}})()}),(a,s)=>{const i=t,r=e;return f(),n("div",y,[s[0]||(s[0]=p("div",{class:"flex flex-row justify-center items-center pt-2 text-lg font-bold"}," Top NFTs ",-1)),N.value?(f(),m(i,{key:0,loading:N.value,tip:"loading..."},null,8,["loading"])):c("",!0),p("div",x,[(f(!0),n(u,null,d(g.value,e=>(f(),m(r,{key:e.tokenId,data:e,class:"pb-2"},null,8,["data"]))),128))])])}}}),[["__scopeId","data-v-cd9d0388"]]);export{_ as default};
