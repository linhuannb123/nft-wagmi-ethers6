System.register(["./@arco-design-legacy-CNXdEBmj.js","./Marketplace-legacy-Bdmc31TG.js","./axios-legacy-yV-I18uW.js","./vue-router-legacy-CoeBOhgn.js","./ethers-legacy-GMkClv7O.js","./@vue-legacy-CptInZ8Z.js","./resize-observer-polyfill-legacy-BziI34qI.js","./vite-plugin-node-polyfills-legacy-DALTojBt.js","./compute-scroll-into-view-legacy-DAuKekLC.js","./b-tween-legacy-Cwu9SZq3.js","./dayjs-legacy-C0mJ3sWD.js","./number-precision-legacy-1N91zl2W.js","./scroll-into-view-if-needed-legacy-BxMgtnPS.js","./b-validate-legacy-BOWZgn4t.js","./@adraffy-legacy-C-y05QjM.js"],function(e,l){"use strict";var a,t,n,s,r,i,c,o,u,d,g,m,w,y,p,f,v,x,h,j,b,k,I,N;return{setters:[e=>{a=e.M,t=e.R,n=e.C,s=e.B},e=>{r=e.M},e=>{i=e.a},e=>{c=e.u},e=>{o=e.B,u=e.C,d=e.f,g=e.p},e=>{m=e.e,w=e.r,y=e.o,p=e.h,f=e.k,v=e.j,x=e.s,h=e.l,j=e.a1,b=e.y,k=e.z,I=e.n,N=e.m},null,null,null,null,null,null,null,null,null],execute:function(){const l=["src","alt"],M={class:"text-sm font-medium"},T={class:"text-sm font-medium"},F={key:1,class:"text-emerald-700"};e("default",m({name:"NftPage",__name:"nftPage",setup(e){const m=w("0x"),S=w({price:0,tokenId:0,seller:"",owner:"",image:"",name:"",description:""}),_=c();return y(async()=>{try{const e=_.params?await _.params.tokenId:null;e&&await(async e=>{if(!window.ethereum)return S.value={price:0,tokenId:0,seller:"",owner:"",image:"",name:"",description:""},m.value="0x",void a.warning("Please install MetaMask!");try{const l=new o(window.ethereum),a=await l.getSigner();m.value=await a.getAddress()||"0x";const t=new u(r.address,r.abi,await a),n=await t.getListedTokenForId(e),s=await t.tokenURI(e),c=await i.get(s),g={price:Number(d(n[3],"ether"))||0,tokenId:parseInt(n[0])||0,seller:n[2],owner:n[1],image:c.data.image,name:c.data.name,description:c.data.description};S.value=g}catch(l){a.error("NFT失败：",l)}})(Number(e))}catch(e){}}),(e,i)=>{const c=n,d=s,w=t;return v(),p(w,{class:"flex w-full text-white py-[6rem] gap-10",style:{"align-items":"stretch","justify-content":"space-evenly"}},{default:f(()=>[x(c,{xs:20,sm:18,md:14,lg:10,xl:10,xxl:10},{default:f(()=>[h("img",{class:"flex w-full h-full object-cover",src:j(S).image,alt:j(S).name},null,8,l)]),_:1}),x(c,{xs:20,sm:18,md:14,lg:10,xl:10,xxl:10,class:"border-b-2 font-bold text-xl border p-5 w-fit shadow-lg rounded-lg space-y-8"},{default:f(()=>[h("div",null,[i[1]||(i[1]=b(" Name ",-1)),h("span",null,k(j(S).name),1)]),h("div",null,[i[2]||(i[2]=b(" Description: ",-1)),h("span",null,k(j(S).description),1)]),h("div",null,[i[3]||(i[3]=b(" Price: ",-1)),h("span",null,k(j(S).price+"ETH"),1)]),h("div",null,[i[4]||(i[4]=b(" Owner: ",-1)),h("span",M,k(j(S).owner),1)]),h("div",null,[i[5]||(i[5]=b(" Seller: ",-1)),h("span",T,k(j(S).seller),1)]),h("div",null,[j(m)!==j(S).owner&&j(m)!==j(S).seller?(v(),p(d,{key:0,type:"primary",onClick:i[0]||(i[0]=e=>(async e=>{if(!window.ethereum)return S.value={price:0,tokenId:0,seller:"",owner:"",image:"",name:"",description:""},m.value="0x",void a.warning("Please install MetaMask!");try{const l=g(S.value.price.toString(),"ether"),t=new o(window.ethereum),n=await t.getSigner(),s=new u(r.address,r.abi,await n),i=await s.executeSale(e,{value:l});await i.wait(),a.success("You successfully bought the NFT!")}catch(t){var l;a.error("购买NFT失败：",null==t||null===(l=t.data)||void 0===l?void 0:l.message)}})(j(S).tokenId))},{default:f(()=>[...i[6]||(i[6]=[b(" Buy this NFT ",-1)])]),_:1})):I("",!0),j(m)==j(S).owner||j(m)==j(S).seller?(v(),N("p",F,k("You are the owner of this NFT"))):I("",!0)])]),_:1})]),_:1})}}}))}}});
